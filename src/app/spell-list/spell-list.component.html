<div fxLayout="row" fxLayoutAlign="center">
  <div class="container">



    <!-- <div>
      <strong>Source</strong>
      <select name="source" [(ngModel)]="filterSource">
        <option></option>
        <option *ngFor="let source of optionsSource" [value]="source">{{source}}</option>
      </select>
    </div>

    <div>
      <strong>Class</strong>
      <select name="class" [(ngModel)]="filterClass">
        <option></option>
        <option *ngFor="let class of optionsClasses" [value]="class">{{class.name}}</option>
      </select>
    </div>

    <div>
      <strong>Subclass</strong>
      <select name="subclass" [(ngModel)]="filterSubclass">
        <option></option>
        <option *ngFor="let subclass of optionsSubclasses" [value]="subclass">{{subclass.name}}</option>
      </select>
    </div> -->

    <div>

      <!-- <strong>Source</strong>
      <select #selectedSource (change)="onSourceFilterChange(selectedSource.value)">
        <option></option>
        <option *ngFor="let source of optionsSource" [value]="source">{{source.displayTextList}}</option>
      </select> -->

      <!-- <strong>School</strong>
      <select [(ngModel)]="selectedFilter" (ngModelChange)="addFilter()">
        <option *ngFor="let filter of optionsSchool" [ngValue]="filter">{{filter.displayTextList}}</option>
      </select> -->

      <!-- <strong>Source</strong>
      <select [(ngModel)]="selectedFilter" (ngModelChange)="addFilter()">
        <option *ngFor="let filter of optionsSource" [ngValue]="filter">{{filter.displayTextList}}</option>
      </select> -->

      <div fxLayout="row" fxLayoutAlign="left">

        <mat-form-field class="filter-select" appearance="fill">
          <!-- <mat-label>Select a Level</mat-label> -->
          <mat-select [(ngModel)]="selectedFilter" (ngModelChange)="addFilter()" multiple="false"
            placeholder="Filter by Level">
            <mat-option *ngFor="let filter of optionsLevel" [value]="filter" [disabled]="filter.choosen">
              {{filter.displayTextList}}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="filter-select" appearance="fill">
          <mat-select [(ngModel)]="selectedFilters" (ngModelChange)="addFilterMulti()" multiple="true"
            placeholder="Filter by School">
            <mat-option *ngFor="let filter of optionsSchool" [value]="filter" [disabled]="filter.choosen">
              {{filter.displayTextList}}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="filter-select" appearance="fill">
          <mat-select [(ngModel)]="selectedFilter" (ngModelChange)="addFilter()" multiple="false"
            placeholder="Filter by Source">
            <mat-option *ngFor="let filter of optionsSource" [value]="filter" [disabled]="filter.choosen">
              {{filter.displayTextList}}</mat-option>
          </mat-select>
        </mat-form-field>

      </div>


      <mat-chip-list>
        <mat-chip class="spell-class-chip" *ngFor="let filter of filters" [selectable]=false [removable]=true
          (removed)="onFilterRemoved(filter)">
          {{filter.displayText}}
          <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip>
      </mat-chip-list>

    </div>


    <div fxLayout="row" fxLayoutAlign="space-between" style="margin-top:1rem">

      <div>
        <mat-form-field appearance="legacy" style="font-size: larger; margin-left: 0.5rem;">
          <mat-label>
            <mat-icon>search</mat-icon>
            Filter by Name
          </mat-label>
          <input matInput name="name" [(ngModel)]="filterName" (keyup)="onChange()">
        </mat-form-field>
      </div>

      <div class="test">
        <div class="content">{{spellsFiltered.length}} spells</div>
      </div>

    </div>

    <div *ngIf="spellsFiltered.length === 0">- no spells for this filter combination -</div>

    <mat-accordion hideToggle="false" multi="false">

      <mat-expansion-panel *ngFor="let spell of spellsToShow">

        <mat-expansion-panel-header>

          <div>
            <div style="font-size: larger;">
              {{spell.name}}
            </div>
            <div style="font-size: small; font-style: italic; padding-left: 0.25rem; color:gray">
              {{spell.levelSchoolDisplay}}
            </div>
          </div>

        </mat-expansion-panel-header>

        <ng-template matExpansionPanelContent>
          <div>

            <div>
              <span class="spell-property-denotation">Casting time:</span>
              <span class="spell-property-description">{{spell.castingTime}}</span>
            </div>

            <div>
              <span class="spell-property-denotation">Range:</span>
              <span class="spell-property-description">{{spell.range}}</span>
            </div>

            <div>
              <span class="spell-property-denotation">Components:</span>
              <span class="spell-property-description">{{spell.componentsDisplay}}</span>
            </div>

            <div>
              <span class="spell-property-denotation">Duration:</span>
              <span class="spell-property-description">{{spell.duration}}</span>
            </div>

            <div class="big-top-gap" [innerHTML]="spell.description"></div>

            <div class="medium-top-gap">
              <mat-divider></mat-divider>
            </div>


            <div class="big-top-gap">
              <span class="spell-property-denotation">Classes:</span>
              <mat-chip-list>
                <mat-chip class="spell-class-chip" *ngFor="let spellClass of spell.classes">
                  {{spellClass.name}}
                </mat-chip>
              </mat-chip-list>
              <!-- <span class="spell-property-denotation">Classes:</span>
              <span class="spell-property-description">{{spell.classesDisplay}}</span> -->
            </div>

            <div class="medium-top-gap" *ngIf="spell.subclasses.length">
              <div class="spell-property-denotation">Subclasses:</div>
              <mat-chip-list>
                <mat-chip class="spell-class-chip" *ngFor="let spellSubclass of spell.subclasses" [selectable]=false>
                  {{spellSubclass.name}}
                </mat-chip>
              </mat-chip-list>
              <!-- <span class="spell-property-denotation">Subclasses:</span> -->
              <!-- <span class="spell-property-description">{{spell.subclassesDisplay}}</span> -->
            </div>

            <div class="big-top-gap" style="font-style: italic;">{{spell.source}}</div>

          </div>
        </ng-template>

      </mat-expansion-panel>

    </mat-accordion>


  </div>
</div>
